"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ReferralProcessorHandler_1 = require("./resolvers/ReferralProcessorHandler");
/**
 * Lambda Function handler, handling incoming events, from the referral SQS queue, and thus,
 * processing incoming referrals needed processing so they can be redeemed and accounted for
 * by users.
 *
 * @param event SQS event to be passed in the handler
 * @returns a {@link Promise} containing a {@link SQSBatchResponse}
 */
exports.handler = async (event) => {
    console.log(`Received new referral message from reminders SQS queue, with number of records ${event.Records.length}, id: ${event.Records[0].messageId}, contents: ${event.Records[0].body}`);
    // process referrals
    return await (0, ReferralProcessorHandler_1.processReferral)(event);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9sYW1iZGEvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLG1GQUFxRTtBQUVyRTs7Ozs7OztHQU9HO0FBQ0gsT0FBTyxDQUFDLE9BQU8sR0FBRyxLQUFLLEVBQUUsS0FBZSxFQUE2QixFQUFFO0lBQ25FLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0ZBQWtGLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxTQUFTLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxlQUFlLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUU3TCxvQkFBb0I7SUFDcEIsT0FBTyxNQUFNLElBQUEsMENBQWUsRUFBQyxLQUFLLENBQUMsQ0FBQztBQUN4QyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1NRU0JhdGNoUmVzcG9uc2UsIFNRU0V2ZW50fSBmcm9tICdhd3MtbGFtYmRhJztcbmltcG9ydCB7cHJvY2Vzc1JlZmVycmFsfSBmcm9tIFwiLi9yZXNvbHZlcnMvUmVmZXJyYWxQcm9jZXNzb3JIYW5kbGVyXCI7XG5cbi8qKlxuICogTGFtYmRhIEZ1bmN0aW9uIGhhbmRsZXIsIGhhbmRsaW5nIGluY29taW5nIGV2ZW50cywgZnJvbSB0aGUgcmVmZXJyYWwgU1FTIHF1ZXVlLCBhbmQgdGh1cyxcbiAqIHByb2Nlc3NpbmcgaW5jb21pbmcgcmVmZXJyYWxzIG5lZWRlZCBwcm9jZXNzaW5nIHNvIHRoZXkgY2FuIGJlIHJlZGVlbWVkIGFuZCBhY2NvdW50ZWQgZm9yXG4gKiBieSB1c2Vycy5cbiAqXG4gKiBAcGFyYW0gZXZlbnQgU1FTIGV2ZW50IHRvIGJlIHBhc3NlZCBpbiB0aGUgaGFuZGxlclxuICogQHJldHVybnMgYSB7QGxpbmsgUHJvbWlzZX0gY29udGFpbmluZyBhIHtAbGluayBTUVNCYXRjaFJlc3BvbnNlfVxuICovXG5leHBvcnRzLmhhbmRsZXIgPSBhc3luYyAoZXZlbnQ6IFNRU0V2ZW50KTogUHJvbWlzZTxTUVNCYXRjaFJlc3BvbnNlPiA9PiB7XG4gICAgY29uc29sZS5sb2coYFJlY2VpdmVkIG5ldyByZWZlcnJhbCBtZXNzYWdlIGZyb20gcmVtaW5kZXJzIFNRUyBxdWV1ZSwgd2l0aCBudW1iZXIgb2YgcmVjb3JkcyAke2V2ZW50LlJlY29yZHMubGVuZ3RofSwgaWQ6ICR7ZXZlbnQuUmVjb3Jkc1swXS5tZXNzYWdlSWR9LCBjb250ZW50czogJHtldmVudC5SZWNvcmRzWzBdLmJvZHl9YCk7XG5cbiAgICAvLyBwcm9jZXNzIHJlZmVycmFsc1xuICAgIHJldHVybiBhd2FpdCBwcm9jZXNzUmVmZXJyYWwoZXZlbnQpO1xufVxuIl19